{# -- Base Page Layout -- #}
{# ----------------------------------------------------------------- #}
{% extends '_base/base.twig' %}

{# -- Page Variables -- #}
{# ----------------------------------------------------------------- #}
{% set headline = post.meta('post_headline')|default(post.title) %}
{% set subheadline = post.meta('post_subheadline')|default(null) %}
{% set bannerImage = post.meta('banner_image') ?? post.thumbnail|default(null) %}
{% set bannerImages = post.meta('banner_images')|default(null) %}
{% set bannerVideo = post.meta('banner_video_embed')|default(null) %}
{% set bannerType = post.meta('banner_type')|default('default') %}
{% set button = post.meta('banner_button')|default(null) %}
{% set pageBuilder = post.meta('section_builder')|default(null) %}

{# -- Page Template -- #}
{# ----------------------------------------------------------------- #}
{% block content %}

    <article class="o-page">

        {% include '_components/banner.twig' with {
            params: {
                headline: headline,
                text: post.content,
                style: bannerType,
                image: bannerImage,
                video: bannerVideo,
                button: button
            }
        } only %}

        <section class="c-locations" data-module-sort>
            <div class="c-locations__sort" data-scroll-trigger>
                <form method="get" action="">
                    <select name="sort_by" onchange="this.form.submit()">
                        <option value="titleAsc" {% if sort_by == 'titleAsc' or sort_by == 'title' %}selected{% endif %}>Title ↑</option>
                        <option value="titleDesc" {% if sort_by == 'titleDesc' %}selected{% endif %}>Title ↓</option>
                        <option value="date" {% if sort_by == 'date' %}selected{% endif %}>Date</option>
                        <option value="rand" {% if sort_by == 'rand' %}selected{% endif %}>Random</option>
                    </select>
                </form>
            </div>
            {% include '_components/grid.twig' with {
                params: {
                    items: locations
                }
            } only %}
        </section>

        {% include '_partials/page-builder.twig' with {
            params: {
                sections: pageBuilder
            }
        } only %}

    </article>

{% endblock %}
