{# -- Base Page Layout -- #}
{# ----------------------------------------------------------------- #}
{% extends '_base/base.twig' %}

{# -- Page Variables -- #}
{# ----------------------------------------------------------------- #}
{% set headline = post.meta('post_headline')|default(post.title) %}
{% set subheadline = post.meta('post_subheadline')|default(null) %}
{% set bannerImage = post.meta('banner_image') ?? post.thumbnail|default(null) %}
{% set bannerType = post.meta('banner_type')|default('default') %}
{% set button = post.meta('banner_button')|default(null) %}

{# -- Page Template -- #}
{# ----------------------------------------------------------------- #}
{% block content %}

    <article class="o-page">

        {% include '_components/banner.twig' with {
            params: {
                headline: headline,
                text: subheadline,
                style: bannerType,
                image: bannerImage,
                button: button
            }
        } only %}

        <section class="c-intro">
            <div class="u-wysiwyg">
                {{ post.content }}
            </div>
        </section>

        <section class="c-blog">
            {% for post in posts %}
                <div class="c-blog__post">

                    {% if post.thumbnail %}
                        {% include '_elements/picture.twig' with {
                            params: {
                                src: get_image(post.thumbnail),
                                ratio: '4:3',
                                classes: 'c-member__logo'
                            }
                        } only %}

                    {% else %}
                        <picture class="c-media u-ratio u-16:9">
                            <img src="https://michiganciders.com/wp-content/themes/pomich/assets/img/placeholder.jpg" alt="placeholder image" class="c-media__image" />
                        </picture>

                    {% endif %}

                    <div class="u-wysiwyg">
                        <h3 class="u-heading">
                            <a href="{{ post.link }}" title="{{ post.post_headline|default(post.title) }}" class="u-link">{{ post.post_headline|default(post.title) }}</a>
                        </h3>
                        <time datetime="{{ post.date|date('c') }}">Posted on {{ post.date }}</time>
                        <p>{{ post.content|excerpt(40) }}</p>
                    </div>

                </div>
            {% endfor %}
        </section>

        {% include '_components/pagination.twig' with {
            params: {
                pagination: pagination
            }
        } %}

    </article>

    {% include '_partials/sidebar.twig' with {
        params: {
            widgets: sidebar
        }
    } only %}

{% endblock %}
